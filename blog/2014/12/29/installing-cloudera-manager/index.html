<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>Installing Cloudera Manager - To Boldly Code&#8230;</title>
  <meta name="author" content="George McDaid">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://boldlycoding.com/blog/2014/12/29/installing-cloudera-manager">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="To Boldly Code..." type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://boldlycoding.com/blog/2014/12/29/installing-cloudera-manager">
  <meta property="og:title" content="Installing Cloudera Manager - To Boldly Code...">
  

  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>

<link href="http://bootswatch.com/cerulean/bootstrap.min.css" rel="stylesheet" type="text/css">


  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-28443557-2', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">To Boldly Code&#8230;</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <form class="search navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                            <input type="hidden" name="q" value="site:boldlycoding.com">
                            <div class="form-group">
                                <input class="form-control" type="text" name="q" placeholder="Search">
                            </div>
                        </form>
                    </li>
                
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div>
<article class="hentry" role="article">
  
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        



<time class='entry-date' datetime='2014-12-29T08:47:51-05:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:47 am</span></time>
        
      </p>
    
    
    <h1 class="entry-title" itemprop="name headline">
        Installing Cloudera Manager
        
    </h1>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><!-- more -->


<p>Cloudera Manager (CM) will install the Oracle JDK, CDH (runs Hadoop), and other service management software. The manager administrates many services including HDFS, YARN, ZooKeeper, Oozie, Hive, Hue, Sqoop, HBase, Impala, Solr and Spark. Many of these can be installed only if they are needed. The CM installation process includes a section to select all or a subset of the services.</p>

<ol>
<li><p>Start a tmux session with</p>

<pre><code class="`"> tmux
</code></pre>

<p> In the event of a disconnect reconnect to the machine and run</p>

<pre><code class="`"> tmux a
</code></pre>

<p> Tmux will try to attach to a previously running session.</p></li>
<li><p>Download and start the Cloudera Manager installer on the cluster manager</p>

<pre><code class="`"> wget http://archive.cloudera.com/cm5/installer/latest/cloudera-manager-installer.bin
 chmod u+x cloudera-manager-installer.bin
 sudo ./cloudera-manager-installer.bin
</code></pre></li>
<li><p>If the installation was started correctly, it should display what is shown in the screenshot below. Select <em>Next</em> to continue.</p>

<p> <img class="center" src="/images/cm/3_start.PNG" width="550" height="750" title="Select next" ></p></li>
<li><p>Accept the Cloudera license</p></li>
<li><p>Accept the Oracle binary license. The installer will proceed to install the Cloudera repository, gather files, and install the JDK followed by Cloudera Manager Server. Have patience as the installation can take some time.</p></li>
<li><p>When the installer finishes, it will indicate to open a web browser and navigate to the following url: <a href="http://localhost:7180/">http://localhost:7180/</a> The default username is <strong>admin</strong> and the password is <strong>admin</strong>. Open a web browser and use a url that will connect to the appropriate node in the cluster. After logging in, the installation will continue.</p>

<p> <img class="center" src="/images/cm/6_browser.PNG" width="550" height="750" title="Open a web browser" ></p></li>
<li><p>After signing in, the CM installer will displays a comparison of the different versions. Cloudera Express supports the goals of my project, if Enterprise is selected a trial will be provided for 60 days and then all features will return to the level of Cloudera Express. After reviewing the offerings, click your desired offering and then click continue.</p></li>
<li><p>CM displays the services available, click continue.</p></li>
<li><p>Now, all the nodes in the cluster will need to be selected. To select hosts, patterns are supported. Supported patters include</p>

<pre><code class="`"> 10.1.1.[1-4] -&gt; 10.1.1.1, 10.1.1.2, 10.1.1.3, 10.1.1.4
 host[1-3].network.com -&gt; host1.network.com, host2.network.com, host3.network.com
 host[07-10].network.com -&gt; host07.network.com, host08.network.com, host09.network.com, host10.network.com
</code></pre>

<p> My cluster has three hosts, and I chose to use IP address patterns. To select all the hosts I entered</p>

<pre><code class="`"> 10.1.0.[111-113]
</code></pre>

<p> If hosts are successfully found CM should display the following after clicking search</p>

<p> <img class="center" src="/images/cm/9_hosts.PNG" width="550" height="750" title="Hosts were found" ></p>

<p> If all the hosts were found, click continue, otherwise check the entered pattern/hostnames before continuing.</p></li>
<li><p>The CM installer will now confirm repository options, the defaults should be appropriate, so just click Continue.</p>

<p><img class="center" src="/images/cm/10_repo.PNG" width="550" height="750" title="Hosts were found" ></p></li>
<li><p>Next, the installer displays the Oracle license for the JDK. Click the check box at the bottom and then click Continue. Unless needed, the check box for Java Unlimited Strength Encryption Policy files does not need to be checked.</p></li>
<li><p>The installer will now ask if services should be installed in single user mode. To simplify the installation, <strong>do not</strong> click the check box and just click continue.</p></li>
<li><p>The installer will now need root SSH credentials. Ensure that root access via SSH on all hosts is possible and enter the appropriate credentials and port number. To simplify my own installation process, I have configured all root passwords in the cluster to be the same.</p>

<p><img class="center" src="/images/cm/13_ssh.PNG" width="550" height="750" title="Enter SSH info" ></p>

<p>After clicking continue, the installer will write needed files to all hosts in the cluster.</p></li>
<li><p>After the files have been written, the installer will indicate that operations have completed successfully. Click continue. If problems were encountered, an attempt to remove CM can be made and the installation restarted.</p>

<p><img class="center" src="/images/cm/14_cis.PNG" width="550" height="750" title="Cluster install successful" ></p></li>
<li><p>CM will now download, distribute and activate parcels on all hosts. After this process is complete, click Continue.</p>

<p><img class="center" src="/images/cm/15_parcel.PNG" width="550" height="750" title="Completed parcel distribution" ></p></li>
<li><p>Finally, CM will inspect all the hosts in the cluster. I do not recommend skipping this step. It will check for many common problems. If any are found, correct them. Otherwise, click finish to complete the CM installation.</p></li>
<li><p>Now CDH 5 services need to be selected. For my project I required HDFS, Hive, Hue (A great web interface for Hadoop administration) and YARN (Oozie will also be installed since Hue requires it). To install this subset of services, click the Custom Services radio button. Select the aforementioned services, and click Continue.</p></li>
<li><p>Cloudera Manager will next require that all roles in the cluster be delegated to nodes in the cluster. The master of the cluster should run all services except the HDFS DataNode and the YARN NodeManager. This would not be done in a production cluster as it would degrade performance of the services, but it is suitable for a test cluster. Ensure the master is also running the Cloudera Management Service, this was not selected to run on any nodes during my installation, but the ACtivity Monitor is a useful service to have running. After correctly delegating all the service to the nodes, click Continue.</p></li>
<li><p>The database needs to be configured for CM and CDH services. I prefer to use a MySQL database to maintain the necessary information. To configure MySQL for CM</p>

<p>Stop MySQL</p>

<pre><code>sudo service mysql stop
</code></pre>

<p>Edit <em>/etc/my.cnf</em></p>

<pre><code>sudo nano /etc/mysql/my.cnf
</code></pre>

<p>Change the file to the following (Keeping your own hardware restrictions in mind). Also, note max_connections, in a small cluster (&lt;50 nodes) this can be set to 250. In a larger cluster this can be set to 750.</p>

<pre><code>[mysqld]
transaction-isolation=READ-COMMITTED
# Disabling symbolic-links is recommended to prevent assorted security risks;
# to do so, uncomment this line:
# symbolic-links=0

key_buffer              = 16M
key_buffer_size         = 32M
max_allowed_packet      = 16M
thread_stack            = 256K
thread_cache_size       = 8
query_cache_limit       = 8M
query_cache_size        = 32M
query_cache_type        = 1

max_connections         = 250

# log-bin should be on a disk with enough free space
#log-bin=/x/home/mysql/logs/binary/mysql_binary_log

# For MySQL version 5.1.8 or later. Comment out binlog_format for older versions.
#binlog_format           = mixed

read_buffer_size = 2M
read_rnd_buffer_size = 16M
sort_buffer_size = 8M
join_buffer_size = 8M

# InnoDB settings
innodb_file_per_table = 1
innodb_flush_log_at_trx_commit  = 2
#innodb_log_buffer_size          = 50M

#256MB for every 2GB of RAM installed
innodb_buffer_pool_size         = 256M

#innodb_thread_concurrency = 2 * (cpu cores + disks)
innodb_thread_concurrency       = 4 

innodb_flush_method             = O_DIRECT
#innodb_log_file_size = 50M

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
</code></pre>

<p>Start MySQL</p>

<pre><code>sudo service mysql start
</code></pre>

<p>If MySQL fails to start, run the following for error indications
<code>
cat /var/log/mysql/error.log
</code></p>

<p>Install the MySQL JDBC connector</p>

<pre><code>sudo apt-get install libmysql-java
</code></pre>

<p>Now create the indicated databases and users (with the shown password) using the MySQL CLI or phpMyAdmin. Once everything has been created with the appropriate passwords, click Continue.</p></li>
<li></li>
</ol>

</div>


  <footer>
    <p class="meta">
      
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">Posted by <span class="fn" itemprop="name">George McDaid</span></span>

      



<time class='entry-date' datetime='2014-12-29T08:47:51-05:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:47 am</span></time>
      

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class='category' href='/blog/categories/big-data/'>big data</a>, <a class='category' href='/blog/categories/capstone-2015/'>capstone 2015</a>, <a class='category' href='/blog/categories/cloudera/'>cloudera</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://boldlycoding.com/blog/2014/12/29/installing-cloudera-manager/" data-via="" data-counturl="http://boldlycoding.com/blog/2014/12/29/installing-cloudera-manager/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/12/26/installing-bacula/" title="Previous Post: Installing, Configuring and Testing Bacula">&laquo; Installing, Configuring and Testing Bacula</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/02/06/laravel-as-an-enterprise-php-framework/" title="Next Post: Laravel as an Enterprise PHP Framework">Laravel as an Enterprise PHP Framework &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/2015/02/11/twitter-trends/">Twitter Trends</a>
    
    <a class="list-group-item " href="/blog/2015/02/10/laravel-and-the-database/">Laravel and the Database</a>
    
    <a class="list-group-item " href="/blog/2015/02/10/setting-up-the-development-environment/">Setting Up the Development Environment</a>
    
    <a class="list-group-item " href="/blog/2015/02/06/laravel-as-an-enterprise-php-framework/">Laravel as an Enterprise PHP Framework</a>
    
    <a class="list-group-item active" href="/blog/2014/12/29/installing-cloudera-manager/">Installing Cloudera Manager</a>
    
  </div>
</section>






  
</aside>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2015 - George McDaid<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>


  </body>
</html>
